{
    "version": 8,
    "sources": {
        "hypo": {
            "type": "vector",
            "url": "pmtiles://hypo.pmtiles"
        }
    },
    "layers": [
        {
            "id": "prefecture-below",
            "type": "fill",
            "source": "hypo",
            "source-layer": "prefecture",
            "layout": {},
            "paint": {
                "fill-color": "hsl(0, 0%, 50%)",
                "fill-opacity": 0.2
            }
        },
        {
            "id": "hypocenter-over500",
            "type": "fill",
            "source": "hypo",
            "source-layer": "hypocenter",
            "filter": [">", ["get", "depth"], 500],
            "layout": {},
            "paint": {
                "fill-color": [
                    "interpolate",
                    ["linear"],
                    ["get", "depth"],
                    480,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(240, 90%, 70%)",
                        1000,
                        "hsl(240, 70%, 40%)"
                    ],
                    600,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(300, 90%, 70%)",
                        1000,
                        "hsl(300, 70%, 40%)"
                    ]
                ],
                "fill-opacity": 0.8
            }
        },
        {
            "id": "hypocenter",
            "type": "fill-extrusion",
            "source": "hypo",
            "source-layer": "hypocenter",
            "filter": ["<=", ["get", "depth"], 500],
            "layout": {},
            "paint": {
                "fill-extrusion-color": [
                    "interpolate",
                    ["linear"],
                    ["get", "depth"],
                    0,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(0, 90%, 70%)",
                        1000,
                        "hsl(0, 70%, 40%)"
                    ],
                    120,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(60, 90%, 70%)",
                        1000,
                        "hsl(60, 70%, 40%)"
                    ],
                    240,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(120, 90%, 70%)",
                        1000,
                        "hsl(120, 70%, 40%)"
                    ],
                    360,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(180, 90%, 70%)",
                        1000,
                        "hsl(180, 70%, 40%)"
                    ],
                    480,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(240, 90%, 70%)",
                        1000,
                        "hsl(240, 70%, 40%)"
                    ],
                    600,
                    [
                        "interpolate",
                        ["exponential", 0.9],
                        ["get", "count"],
                        0,
                        "hsl(300, 90%, 70%)",
                        1000,
                        "hsl(300, 70%, 40%)"
                    ]
                ],
                "fill-extrusion-height": [
                    "+",
                    ["*", ["-", 500, ["get", "depth"]], 1000],
                    10000
                ],
                "fill-extrusion-base": [
                    "*",
                    ["-", 500, ["get", "depth"]],
                    1000
                ],
                "fill-extrusion-vertical-gradient": false,
                "fill-extrusion-opacity": 0.8
            }
        },
        {
            "id": "prefecture-above",
            "type": "fill-extrusion",
            "source": "hypo",
            "source-layer": "prefecture",
            "layout": {},
            "paint": {
                "fill-extrusion-color": "hsl(180, 40%, 80%)",
                "fill-extrusion-height": 512000,
                "fill-extrusion-base": 512000,
                "fill-extrusion-vertical-gradient": false,
                "fill-extrusion-opacity": 0.6
            }
        }
    ]
}
